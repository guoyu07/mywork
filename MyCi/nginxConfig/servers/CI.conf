# localhost : 81
    server {
        listen       80;
        server_name  imora.oradt.com;

        charset UTF-8;

        access_log  D:/wamp/bin/nginx/nginx-1.9.3/logs/81_access.log;
        error_log  D:/wamp/bin/nginx/nginx-1.9.3/logs/81_error.log;

        location / {
            root   G:/Git/OradtWeb2.2/Public/;
            index  index.php index.html index.htm;
            rewrite_log on;
            error_log   logs/error_write_root.log  debug;
            
            if (!-e $request_filename) {
                rewrite ^/index.php(.*)$ /index.php?s=$1 last;
                rewrite ^(.*)$ /index.php?s=$1 last;
                break;
            }
        }

        location /ci/mywork/ {
            rewrite_log on;
            error_log   logs/error_write.log  debug;
            alias   G:/Git/mywork/MyCi/www/;
            index  index.php index.html index.htm;
            
            if (!-e $request_filename) {
                rewrite ^/ci/mywork/(.*)$ /ci/mywork/index.php/$1 last;
                break;
            }
        }

        location = /50x.html {
            root   G:/Git/OradtWeb2.2/Public;
        }

        location ~ ^/ci/mywork/.+\.php($|/) {
            rewrite /ci/mywork/(.*\.php?) /$1 break;
            fastcgi_pass   127.0.0.1:9001;
            fastcgi_index  index.php;
            
            #set $path_info "";
            add_header PATH_INFO5 path_info;
            add_header PATH_INFO2 $fastcgi_script_name;
            #if ($fastcgi_script_name ~ "^(.+?\.php)()$"){
            #    set path_info $2;
            #}
            fastcgi_split_path_info ^(.+\.php)(.*)$;     #增加这一句
            fastcgi_param PATH_INFO $fastcgi_path_info;    #增加这一句
            add_header PATH_INFO1 $1/$2;
            add_header PATH_INFO3 $request_uri;
            add_header PATH_INFO4 $fastcgi_path_info;
            include        fastcgi_params;
            
        #    fastcgi_param  PATH_INFO $fastcgi_path_info;
            
            fastcgi_param   SCRIPT_FILENAME  G:/Git/mywork/MyCi/www/$fastcgi_script_name;
            fastcgi_param   PATH_TRANSLATED  G:/Git/mywork/MyCi/www/$fastcgi_path_info;
            #fastcgi_param   PATH_INFO $path_info;
        }

        location ~ .+\.php($|/) {
            root G:/Git/OradtWeb2.2/Public/;
            fastcgi_pass   127.0.0.1:9001;
            fastcgi_index  index.php;
        #   fastcgi_split_path_info ^((?U).+.php)(/?.+)$;
            
        #    fastcgi_split_path_info ^(.+\.php)(.*)$;
            fastcgi_param  PATH_INFO $fastcgi_path_info;
            
            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
           #fastcgi_param   PATH_INFO               $fastcgi_path_info;
           fastcgi_param   PATH_TRANSLATED $document_root$fastcgi_path_info;
            include        fastcgi_params;
        }

        location ~ /\.ht {
            deny  all;
        }
    }
    

# ci.oradt.com
    server {
        listen       80;
        server_name  ci.oradt.com;

        charset utf-8;

        access_log  D:/wamp/bin/nginx/nginx-1.9.3/logs/ci.oradt.com_access.log;
        error_log  D:/wamp/bin/nginx/nginx-1.9.3/logs/ci.oradt.com_error.log;

        location / {
            root   G:/Git/mywork/MyCi/www/;
            index  index.php index.html index.htm;
            
            if (!-e $request_filename) {
                rewrite ^(.*)$ /index.php?$1 last;
                break;
            }
        }

        location = /50x.html {
            root   G:/Git/mywork/MyCi/www/;
        }

        location ~ \.php$ {
            root           G:/Git/mywork/MyCi/www/;
            fastcgi_pass   127.0.0.1:9001;
            fastcgi_index  index.php;
            include        fastcgi_params;
            
            ##########################################pathinfo 模式
            set $path_info "";
            set $real_script_name $fastcgi_script_name;
            if ($request_uri ~ "^(.+?\.php)(/.+)$"){
                 set $real_script_name $1;
                 set $path_info $2;
            }
            
            #add_header PATH_INFO2 $fastcgi_script_name;
            #add_header PATH_INFO1 $path_info;
            #add_header PATH_INFO3 $request_uri;
            include fastcgi.conf;
            fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;
            fastcgi_param SCRIPT_NAME $real_script_name;
            fastcgi_param PATH_INFO $path_info;
            ##########################################nginx支持pathinfo 模式的重点
        }

        location ~ /\.ht {
            deny  all;
        }
    }